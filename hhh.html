<!DOCTYPE html>
<html>
<head>
	<title>Affordability Calculator</title>
	<style>
        *{
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
        }
        .container {
	max-width: 900px;
	margin: 0 auto;
	padding: 20px;
 
}
.cal{
    padding: 0px 20px;
}


form {
	display: flex;
	flex-wrap: wrap;
	margin: 20px 0;
}

label {
	flex-basis: 100%;
	margin-bottom: 5px;
}

input[type="number"] {
	flex-basis: 100%;
	margin-bottom: 15px;
	padding: 5px;
	font-size: 18px;
    height: 40px;
	border-radius: 5px;
	border: 1px solid #ccc;
    
}

button[type="submit"] {
	background-color: #3751C9;
	color: #fff;
	padding: 20px 60px;
	border: none;
	border-radius: 5px;
	cursor: pointer;
}

button[type="submit"]:hover {
	background-color: #3e8e41;
}

#result {
	margin-top: 20px;
    padding: 0 10px;
}

.range-container {
	margin-top: 20px;
}

#affordability-range {
	width: 100%;
}

#affordability-output {
	font-size: 24px;
	text-align: center;
	margin-top: 10px;
}

    </style>
</head>
<body>
	<div class="container">
		<div class="cal">
            <h1>Affordability Calculator</h1>
		<form id="affordability-form">
			<label for="income">Monthly Income</label>
			<input type="number" id="income" name="income">

			<label for="expenses">Monthly Expenses</label>
			<input type="number" id="expenses" name="expenses">

			<label for="debt-to-income">Debt-to-Income Ratio</label>
			<input type="number" id="debt-to-income" name="debt-to-income">

			<label for="interest">Interest Rate</label>
			<input type="number" id="interest" name="interest">

			<label for="term">Loan Term (years)</label>
			<input type="number" id="term" name="term">

			<button type="submit">Calculate</button>
		</form>
        </div>

		<div id="result" style="display: none;">
			<h2>Result</h2>
			<p>Your monthly payment will be <span id="monthly-payment"></span>.</p>
			<p>You will pay a total of <span id="total-payment"></span> over the life of the loan.</p>
			<p>The total interest paid will be <span id="total-interest"></span>.</p>
			<div class="range-container">
				<p>Based on the information you provided, a house at this price should fit comfortably within your budget:</p>
				<input type="range" id="affordability-range" min="0" max="100" value="0">
				<div id="affordability-output"></div>
			</div>
		</div>
	</div>

	<script>
        const affordabilityForm = document.getElementById('affordability-form');
const monthlyPaymentElement = document.getElementById('monthly-payment');
const totalInterestElement = document.getElementById('total-interest');
const totalPaymentElement = document.getElementById('total-payment');
const resultElement = document.getElementById('result');
const affordabilityRange = document.getElementById('affordability-range');
const affordabilityOutput = document.getElementById('affordability-output');

function calculateAffordability(event) {
  event.preventDefault();

  const income = Number(document.getElementById('income').value);
  const expenses = Number(document.getElementById('expenses').value);
  const debtToIncomeRatio = Number(document.getElementById('debt-to-income').value);
  const interest = Number(document.getElementById('interest').value);
  const term = Number(document.getElementById('term').value);

  const monthlyIncome = income - expenses;
  const maxMonthlyPayment = monthlyIncome * (debtToIncomeRatio / 100);
  const monthlyInterestRate = (interest / 100) / 12;
  const totalPayments = term * 12;
  const discountFactor = (Math.pow(1 + monthlyInterestRate, totalPayments) - 1) /
    (monthlyInterestRate * Math.pow(1 + monthlyInterestRate, totalPayments));

  const monthlyPayment = (maxMonthlyPayment / discountFactor).toFixed(2);
  const totalPayment = (monthlyPayment * totalPayments).toFixed(2);
  const totalInterest = (totalPayment - (maxMonthlyPayment * totalPayments)).toFixed(2);

  monthlyPaymentElement.innerText = `$${monthlyPayment}`;
  totalInterestElement.innerText = `$${totalInterest}`;
  totalPaymentElement.innerText = `$${totalPayment}`;

  const maxHomePrice = (maxMonthlyPayment / (monthlyInterestRate * discountFactor)) *
    (1 - Math.pow((1 + monthlyInterestRate), -totalPayments)).toFixed(2);
  affordabilityRange.value = Math.floor((maxHomePrice / income) * 100);
  affordabilityOutput.innerText = `$${maxHomePrice}`;

  resultElement.style.display = 'block';
}

affordabilityForm.addEventListener('submit', calculateAffordability);

affordabilityRange.addEventListener('input', () => {
  const affordabilityValue = affordabilityRange.value;
  affordabilityOutput.innerText = `$${(affordabilityValue * document.getElementById('income').value / 100).toFixed(2)}`;
});

    </script>
</body>
</html>
